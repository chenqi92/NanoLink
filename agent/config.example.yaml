# NanoLink Agent Configuration Example
# Place this file at /etc/nanolink/nanolink.yaml

# Agent settings
agent:
  # Override hostname (optional, defaults to system hostname)
  # hostname: my-server
  
  # Heartbeat interval in seconds
  heartbeat_interval: 30
  
  # Reconnect delay in seconds (uses exponential backoff)
  reconnect_delay: 5
  max_reconnect_delay: 300

# Server connections (gRPC only)
servers:
  - host: localhost      # Server hostname or IP
    port: 39100          # gRPC port (default: 39100)
    token: your_token_here
    permission: 0        # 0=READ_ONLY, 1=BASIC_WRITE, 2=SERVICE_CONTROL, 3=SYSTEM_ADMIN
    tls_enabled: false   # Enable TLS (grpcs://)
    tls_verify: true     # Verify TLS certificates

# Metrics collection settings
collector:
  # Realtime metrics interval (CPU/Memory/IO) in milliseconds
  # Default: 5000 (5 seconds) - balance between responsiveness and resource usage
  realtime_interval_ms: 5000
  
  # Disk space usage interval in milliseconds
  disk_usage_interval_ms: 30000   # 30 seconds
  
  # User sessions check interval
  session_interval_ms: 60000      # 1 minute
  
  # IP address check interval  
  ip_check_interval_ms: 60000     # 1 minute
  
  # S.M.A.R.T health check interval
  health_check_interval_ms: 300000  # 5 minutes
  
  # Feature flags
  enable_disk_io: true
  enable_network: true
  enable_per_core_cpu: true
  enable_layered_metrics: true   # Separate realtime/periodic/static data

# Ring buffer settings (for offline data caching)
buffer:
  # Number of metrics to cache when disconnected
  # At 5-second interval: 720 = 1 hour of data
  capacity: 720

# Shell command execution (DANGEROUS - disabled by default)
shell:
  enabled: false
  # super_token: your_super_secret_token
  timeout_seconds: 30
  whitelist: []
  blacklist:
    - "rm -rf"
    - "mkfs"
    - "> /dev"
    - "dd if="

# Logging settings
logging:
  level: info          # debug, info, warn, error
  # file: /var/log/nanolink-agent.log
  audit_enabled: true
  audit_file: /var/log/nanolink-audit.log

# Management API (localhost only)
management:
  enabled: true
  port: 9101
  # api_token: optional_api_token
